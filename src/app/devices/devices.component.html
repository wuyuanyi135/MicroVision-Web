<div class="mat-typography" id="container">
  <div class="mat-h2 header">
    Device Pair Configuration
    <mat-spinner *ngIf="loading" mode="indeterminate" diameter="30"></mat-spinner>
  </div>

  <table #deviceTable mat-table class="mat-elevation-z1" [dataSource]="deviceSrv.DevicePairs | async">
    <ng-container matColumnDef="index">
      <th mat-header-cell *matHeaderCellDef class="index-col"> # </th>
      <td mat-cell (click)="toggleConnection(element)" *matCellDef="let element; let i = index" class="index-col"> {{i}} </td>
    </ng-container>

    <ng-container matColumnDef="camera">
      <th mat-header-cell *matHeaderCellDef> Camera </th>
      <td mat-cell (click)="toggleConnection(element)" *matCellDef="let element"> {{element.camera.displayName}} </td>
    </ng-container>

    <ng-container matColumnDef="controller">
      <th mat-header-cell *matHeaderCellDef> Controller </th>
      <td mat-cell (click)="toggleConnection(element)" *matCellDef="let element"> {{element.controller.displayName}} </td>
    </ng-container>

    <ng-container matColumnDef="edit">
      <th mat-header-cell *matHeaderCellDef>  </th>
      <td mat-cell *matCellDef="let element" class="icon-col">
        <button mat-icon-button disableRipple (click)="editPair(element)"><mat-icon>edit</mat-icon></button>
      </td>
    </ng-container>

    <ng-container matColumnDef="delete">
      <th mat-header-cell *matHeaderCellDef>  </th>
      <td mat-cell *matCellDef="let element" class="icon-col">
        <button mat-icon-button disableRipple (click)="deletePair(element)"><mat-icon>delete</mat-icon></button>
      </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns;" [class.connected]="row.connected"></tr>
  </table>

  <p>
    Use the '+' button to create new device pair.
    Click on the existing entry to test and connect to the configured devices.
    Use the buttons on each row to modify or delete the entry.
  </p>
</div>

<button mat-fab (click)="createPair()"><mat-icon>add</mat-icon></button>
